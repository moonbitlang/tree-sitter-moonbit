================================================================================
new_type
================================================================================
type New(Int)
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (tuple_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier))))))))))

================================================================================
phantom type
================================================================================
type Length[_] Int
type Length[_]

type Kilometer
type Mile

fn add[T](x: Length[T], y:Length[T]) -> Length[T] {
  Length::Length(x.0 + y.0)
}

let d_km: Length[Kilometer] = Length(10)
let d_mile: Length[Mile] = Length(16)
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type_parameters
        (type_identifier
          (identifier
            (lowercase_identifier))))
      (type
        (apply_type
          (qualified_type_identifier
            (identifier
              (uppercase_identifier)))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type_parameters
        (type_identifier
          (identifier
            (lowercase_identifier))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (named_lambda_expression
      (function_identifier
        (lowercase_identifier))
      (type_parameters
        (type_identifier
          (identifier
            (uppercase_identifier))))
      (parameters
        (parameter
          (lowercase_identifier)
          (type_annotation
            (colon)
            (type
              (apply_type
                (qualified_type_identifier
                  (identifier
                    (uppercase_identifier)))
                (type_arguments
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier))))))))))
        (parameter
          (lowercase_identifier)
          (type_annotation
            (colon)
            (type
              (apply_type
                (qualified_type_identifier
                  (identifier
                    (uppercase_identifier)))
                (type_arguments
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))))))))
      (return_type
        (type
          (apply_type
            (qualified_type_identifier
              (identifier
                (uppercase_identifier)))
            (type_arguments
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))
      (block_expression
        (statement_expression
          (expression
            (pipeline_expression
              (compound_expression
                (simple_expression
                  (apply_expression
                    (simple_expression
                      (constructor_expression
                        (type_name
                          (qualified_type_identifier
                            (identifier
                              (uppercase_identifier))))
                        (colon_colon)
                        (uppercase_identifier)))
                    (argument
                      (expression
                        (pipeline_expression
                          (compound_expression
                            (binary_expression
                              (compound_expression
                                (simple_expression
                                  (access_expression
                                    (simple_expression
                                      (qualified_identifier
                                        (lowercase_identifier)))
                                    (accessor
                                      (dot)))))
                              (compound_expression
                                (simple_expression
                                  (access_expression
                                    (simple_expression
                                      (qualified_identifier
                                        (lowercase_identifier)))
                                    (accessor
                                      (dot))))))))))))))))
        (semicolon
          (automatic_semicolon)))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (let_expression
      (pattern
        (simple_pattern
          (lowercase_identifier)))
      (type_annotation
        (colon)
        (type
          (apply_type
            (qualified_type_identifier
              (identifier
                (uppercase_identifier)))
            (type_arguments
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))
      (expression
        (pipeline_expression
          (compound_expression
            (simple_expression
              (apply_expression
                (simple_expression
                  (constructor_expression
                    (uppercase_identifier)))
                (argument
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (atomic_expression
                            (literal
                              (integer_literal)))))))))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (let_expression
      (pattern
        (simple_pattern
          (lowercase_identifier)))
      (type_annotation
        (colon)
        (type
          (apply_type
            (qualified_type_identifier
              (identifier
                (uppercase_identifier)))
            (type_arguments
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))
      (expression
        (pipeline_expression
          (compound_expression
            (simple_expression
              (apply_expression
                (simple_expression
                  (constructor_expression
                    (uppercase_identifier)))
                (argument
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (atomic_expression
                            (literal
                              (integer_literal))))))))))))))))
