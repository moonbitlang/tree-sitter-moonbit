================================================================================
Option type
================================================================================
type T (Int) -> Int?
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type
              (option_type
                (type
                  (apply_type
                    (qualified_type_identifier
                      (identifier
                        (uppercase_identifier)))))
                (question_operator)))))))))

================================================================================
Error type
================================================================================
type T0 (Int) -> Int!
type T1 (Int) -> Int?!
type T2 (Int) -> Int!Error
type T3 (Int) -> Int?!Error?
type T4 () -> ((Int) -> Int)!Error
type T5 () -> ((Int) -> Int)?!Error?
type T6 () -> ((Int) -> Int?!)!Error?
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))
                  (question_operator)))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))
                  (question_operator)))
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))
                  (question_operator)))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (return_type
            (type_with_error
              (type
                (tuple_type
                  (type
                    (function_type
                      (type
                        (apply_type
                          (qualified_type_identifier
                            (identifier
                              (uppercase_identifier)))))
                      (return_type
                        (type
                          (apply_type
                            (qualified_type_identifier
                              (identifier
                                (uppercase_identifier))))))))))
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (return_type
            (type_with_error
              (type
                (option_type
                  (type
                    (tuple_type
                      (type
                        (function_type
                          (type
                            (apply_type
                              (qualified_type_identifier
                                (identifier
                                  (uppercase_identifier)))))
                          (return_type
                            (type
                              (apply_type
                                (qualified_type_identifier
                                  (identifier
                                    (uppercase_identifier))))))))))
                  (question_operator)))
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))
                  (question_operator)))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (return_type
            (type_with_error
              (type
                (tuple_type
                  (type
                    (function_type
                      (type
                        (apply_type
                          (qualified_type_identifier
                            (identifier
                              (uppercase_identifier)))))
                      (return_type
                        (type_with_error
                          (type
                            (option_type
                              (type
                                (apply_type
                                  (qualified_type_identifier
                                    (identifier
                                      (uppercase_identifier)))))
                              (question_operator)))))))))
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))
                  (question_operator))))))))))

================================================================================
Trait Object type
================================================================================
type T &Logger

impl Show for T with output(self : T, logger : &Logger) -> Unit {
}
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (trait_object_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))))))
  (semicolon
    (automatic_semicolon))
  (statement_expression
    (impl_definition
      (type_name
        (qualified_type_identifier
          (identifier
            (uppercase_identifier))))
      (for_keyword)
      (type
        (apply_type
          (qualified_type_identifier
            (identifier
              (uppercase_identifier)))))
      (function_identifier
        (lowercase_identifier))
      (parameters
        (parameter
          (lowercase_identifier)
          (type_annotation
            (colon)
            (type
              (apply_type
                (qualified_type_identifier
                  (identifier
                    (uppercase_identifier)))))))
        (parameter
          (lowercase_identifier)
          (type_annotation
            (colon)
            (type
              (trait_object_type
                (type
                  (apply_type
                    (qualified_type_identifier
                      (identifier
                        (uppercase_identifier))))))))))
      (return_type
        (type
          (apply_type
            (qualified_type_identifier
              (identifier
                (uppercase_identifier))))))
      (block_expression))))
