================================================================================
Option type
================================================================================
type T (Int) -> Int?
--------------------------------------------------------------------------------

(structure
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type
              (option_type
                (type
                  (apply_type
                    (qualified_type_identifier
                      (identifier
                        (uppercase_identifier)))))))))))))

================================================================================
Error type
================================================================================
type T0 (Int) -> Int!
type T1 (Int) -> Int?!
type T2 (Int) -> Int!Error
type T3 (Int) -> Int?!Error?
type T4 () -> ((Int) -> Int)!Error
type T5 () -> ((Int) -> Int)?!Error?
type T6 () -> ((Int) -> Int?!)!Error?
--------------------------------------------------------------------------------

(structure
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))))))))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))
          (return_type
            (type_with_error
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))))
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))))))))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (return_type
            (type_with_error
              (type
                (tuple_type
                  (type
                    (function_type
                      (type
                        (apply_type
                          (qualified_type_identifier
                            (identifier
                              (uppercase_identifier)))))
                      (return_type
                        (type
                          (apply_type
                            (qualified_type_identifier
                              (identifier
                                (uppercase_identifier))))))))))
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier)))))))))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (return_type
            (type_with_error
              (type
                (option_type
                  (type
                    (tuple_type
                      (type
                        (function_type
                          (type
                            (apply_type
                              (qualified_type_identifier
                                (identifier
                                  (uppercase_identifier)))))
                          (return_type
                            (type
                              (apply_type
                                (qualified_type_identifier
                                  (identifier
                                    (uppercase_identifier))))))))))))
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))))))))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (function_type
          (return_type
            (type_with_error
              (type
                (tuple_type
                  (type
                    (function_type
                      (type
                        (apply_type
                          (qualified_type_identifier
                            (identifier
                              (uppercase_identifier)))))
                      (return_type
                        (type_with_error
                          (type
                            (option_type
                              (type
                                (apply_type
                                  (qualified_type_identifier
                                    (identifier
                                      (uppercase_identifier)))))))))))))
              (type
                (option_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier))))))))))))))

================================================================================
Trait Object type
================================================================================
type T &Logger

impl Show for T with output(self : T, logger : &Logger) -> Unit {
}
--------------------------------------------------------------------------------

(structure
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier))
      (type
        (trait_object_type
          (type
            (apply_type
              (qualified_type_identifier
                (identifier
                  (uppercase_identifier)))))))))
  (structure_item
    (impl_definition
      (type_name
        (qualified_type_identifier
          (identifier
            (uppercase_identifier))))
      (type
        (apply_type
          (qualified_type_identifier
            (identifier
              (uppercase_identifier)))))
      (function_identifier
        (lowercase_identifier))
      (parameters
        (parameter
          (positional_parameter
            (lowercase_identifier)
            (type_annotation
              (type
                (apply_type
                  (qualified_type_identifier
                    (identifier
                      (uppercase_identifier))))))))
        (parameter
          (positional_parameter
            (lowercase_identifier)
            (type_annotation
              (type
                (trait_object_type
                  (type
                    (apply_type
                      (qualified_type_identifier
                        (identifier
                          (uppercase_identifier)))))))))))
      (return_type
        (type
          (apply_type
            (qualified_type_identifier
              (identifier
                (uppercase_identifier))))))
      (block_expression))))

================================================================================
extern type
================================================================================
priv extern type A

extern type B
--------------------------------------------------------------------------------

(structure
  (structure_item
    (type_definition
      (visibility)
      (identifier
        (uppercase_identifier))))
  (structure_item
    (type_definition
      (identifier
        (uppercase_identifier)))))
