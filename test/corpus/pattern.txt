================================================================================
match patterns
================================================================================
fn main {
  match x {
    G | H => ()
    I as j => ()
    K(..) => ()
    L(label~, ..) => ()
    M(a, b) => ()
    N(a as c, b) => ()
  }
}
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (function_definition
      (block_expression
        (statement_expression
          (expression
            (match_expression
              (compound_expression
                (simple_expression
                  (qualified_identifier
                    (lowercase_identifier))))
              (case_clause
                (pattern
                  (or_pattern
                    (pattern
                      (simple_pattern
                        (constructor_pattern
                          (constructor_expression
                            (uppercase_identifier)))))
                    (pattern
                      (simple_pattern
                        (constructor_pattern
                          (constructor_expression
                            (uppercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (as_pattern
                    (pattern
                      (simple_pattern
                        (constructor_pattern
                          (constructor_expression
                            (uppercase_identifier)))))
                    (lowercase_identifier)))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (constructor_pattern
                      (constructor_expression
                        (uppercase_identifier))
                      (constructor_pattern_argument
                        (pattern
                          (simple_pattern
                            (dot_dot)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (constructor_pattern
                      (constructor_expression
                        (uppercase_identifier))
                      (constructor_pattern_argument
                        (parameter_label
                          (lowercase_identifier)))
                      (constructor_pattern_argument
                        (pattern
                          (simple_pattern
                            (dot_dot)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (constructor_pattern
                      (constructor_expression
                        (uppercase_identifier))
                      (constructor_pattern_argument
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (constructor_pattern_argument
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (constructor_pattern
                      (constructor_expression
                        (uppercase_identifier))
                      (constructor_pattern_argument
                        (pattern
                          (as_pattern
                            (pattern
                              (simple_pattern
                                (lowercase_identifier)))
                            (lowercase_identifier))))
                      (constructor_pattern_argument
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon)))))
        (semicolon
          (automatic_semicolon))))))

================================================================================
literal pattern
================================================================================
fn main {
  match x {
    1 => ()
    1.0 => ()
    "hello" => ()
    '\r' => ()
    '\u0660' => ()
  }
}
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (function_definition
      (block_expression
        (statement_expression
          (expression
            (match_expression
              (compound_expression
                (simple_expression
                  (qualified_identifier
                    (lowercase_identifier))))
              (case_clause
                (pattern
                  (simple_pattern
                    (literal
                      (integer_literal))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (literal
                      (float_literal))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (literal
                      (string_literal
                        (string_fragment
                          (unescaped_string_fragment))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (literal
                      (char_literal
                        (escape_sequence)))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (literal
                      (char_literal
                        (escape_sequence)))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon)))))
        (semicolon
          (automatic_semicolon))))))

================================================================================
range pattern
================================================================================
fn init {
  match x {
    0..=3 => println("x")
    0..<4 => println("y")
    _..<5 => println("z")
    _..<_ => println("z")
    (1 | 2)..<(3 | _) => println("z")
    1..=(4..<5) => println("z")
    (1..=4)..<5 => println("z")
   '\u0660'..='\u0669' => println("z")
  }
}
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (function_definition
      (block_expression
        (statement_expression
          (expression
            (match_expression
              (compound_expression
                (simple_expression
                  (qualified_identifier
                    (lowercase_identifier))))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern
                      (literal
                        (integer_literal)))
                    (dot_dot_eq)
                    (simple_pattern
                      (literal
                        (integer_literal)))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern
                      (literal
                        (integer_literal)))
                    (dot_dot_lt)
                    (simple_pattern
                      (literal
                        (integer_literal)))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern)
                    (dot_dot_lt)
                    (simple_pattern
                      (literal
                        (integer_literal)))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern)
                    (dot_dot_lt)
                    (simple_pattern)))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern
                      (pattern
                        (or_pattern
                          (pattern
                            (simple_pattern
                              (literal
                                (integer_literal))))
                          (pattern
                            (simple_pattern
                              (literal
                                (integer_literal)))))))
                    (dot_dot_lt)
                    (simple_pattern
                      (pattern
                        (or_pattern
                          (pattern
                            (simple_pattern
                              (literal
                                (integer_literal))))
                          (pattern
                            (simple_pattern)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern
                      (literal
                        (integer_literal)))
                    (dot_dot_eq)
                    (simple_pattern
                      (pattern
                        (range_pattern
                          (simple_pattern
                            (literal
                              (integer_literal)))
                          (dot_dot_lt)
                          (simple_pattern
                            (literal
                              (integer_literal))))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern
                      (pattern
                        (range_pattern
                          (simple_pattern
                            (literal
                              (integer_literal)))
                          (dot_dot_eq)
                          (simple_pattern
                            (literal
                              (integer_literal))))))
                    (dot_dot_lt)
                    (simple_pattern
                      (literal
                        (integer_literal)))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (range_pattern
                    (simple_pattern
                      (literal
                        (char_literal
                          (escape_sequence))))
                    (dot_dot_eq)
                    (simple_pattern
                      (literal
                        (char_literal
                          (escape_sequence))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon)))))
        (semicolon
          (automatic_semicolon))))))

================================================================================
map pattern
================================================================================
fn main {
  match x {
    {} => println("o")
    { "a" : 1 } => println("a")
    { "a" : 1, .. } => println("b")
    { 1 : 2, "b" : 3 } => println("c")
    { "a" : 1, "b" : 2, "c" : 3 } => println("d")
  }
}
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (function_definition
      (block_expression
        (statement_expression
          (expression
            (match_expression
              (compound_expression
                (simple_expression
                  (qualified_identifier
                    (lowercase_identifier))))
              (case_clause
                (pattern
                  (simple_pattern
                    (empty_struct_or_map_pattern)))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (map_pattern
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (string_literal
                              (string_fragment
                                (unescaped_string_fragment)))))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal))))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (map_pattern
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (string_literal
                              (string_fragment
                                (unescaped_string_fragment)))))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal)))))
                      (dot_dot))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (map_pattern
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (integer_literal)))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal)))))
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (string_literal
                              (string_fragment
                                (unescaped_string_fragment)))))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal))))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (map_pattern
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (string_literal
                              (string_fragment
                                (unescaped_string_fragment)))))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal)))))
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (string_literal
                              (string_fragment
                                (unescaped_string_fragment)))))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal)))))
                      (map_element_pattern
                        (map_element_key
                          (literal
                            (string_literal
                              (string_fragment
                                (unescaped_string_fragment)))))
                        (colon)
                        (pattern
                          (simple_pattern
                            (literal
                              (integer_literal))))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (apply_expression
                            (simple_expression
                              (qualified_identifier
                                (lowercase_identifier)))
                            (argument
                              (expression
                                (pipeline_expression
                                  (compound_expression
                                    (simple_expression
                                      (atomic_expression
                                        (literal
                                          (string_literal
                                            (string_fragment
                                              (unescaped_string_fragment)))))))))))))))))
              (semicolon
                (automatic_semicolon)))))
        (semicolon
          (automatic_semicolon))))))

================================================================================
array patterns
================================================================================
fn main {
  match a {
    [] => ()
    [a, b] => ()
    [a, ..] => ()
    [a, .. as d] => ()
    [a, .. d] => ()
    [.., a] => ()
    [.. as d, a] => ()
    [.. d, a] => ()
    [a, .., b] => ()
    [a, .. as d, b] => ()
    [a, .. d, b] => ()
    [.. A, .. @a.T] => ()
  }
}
--------------------------------------------------------------------------------

(structure
  (statement_expression
    (function_definition
      (block_expression
        (statement_expression
          (expression
            (match_expression
              (compound_expression
                (simple_expression
                  (qualified_identifier
                    (lowercase_identifier))))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern)))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (dot_dot)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (as_pattern
                            (pattern
                              (simple_pattern
                                (dot_dot)))
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (dot_dot)
                        (qualified_identifier
                          (lowercase_identifier))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (dot_dot))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (as_pattern
                            (pattern
                              (simple_pattern
                                (dot_dot)))
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (dot_dot)
                        (qualified_identifier
                          (lowercase_identifier)))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (dot_dot))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (as_pattern
                            (pattern
                              (simple_pattern
                                (dot_dot)))
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier))))
                      (array_sub_pattern
                        (dot_dot)
                        (qualified_identifier
                          (lowercase_identifier)))
                      (array_sub_pattern
                        (pattern
                          (simple_pattern
                            (lowercase_identifier)))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon))
              (case_clause
                (pattern
                  (simple_pattern
                    (array_pattern
                      (array_sub_pattern
                        (dot_dot)
                        (constructor_expression
                          (uppercase_identifier)))
                      (array_sub_pattern
                        (dot_dot)
                        (constructor_expression
                          (package_identifier)
                          (dot_uppercase_identifier))))))
                (statement_expression
                  (expression
                    (pipeline_expression
                      (compound_expression
                        (simple_expression
                          (unit_expression)))))))
              (semicolon
                (automatic_semicolon)))))
        (semicolon
          (automatic_semicolon))))))
